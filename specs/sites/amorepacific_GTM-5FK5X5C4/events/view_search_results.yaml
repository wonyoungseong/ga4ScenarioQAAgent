# view_search_results 이벤트 스펙
# GA4 이벤트: 검색 결과 조회

event: view_search_results
ga4_event_name: view_search_results
dataLayer_event: "ap_search (view_item_list와 동일 트리거)"
trigger_timing: "검색 결과 페이지 로드 시"
required: false  # view_item_list가 주로 사용됨

description: |
  사용자가 검색 결과 페이지를 조회할 때 발생하는 이벤트입니다.
  view_item_list와 유사하지만, 검색 결과 페이지에 특화된 이벤트입니다.
  검색어와 검색 결과 정보가 포함됩니다.

parameters:
  # 검색어
  - ga4_param: search_term
    dev_guide_var: AP_SEARCH_TERM
    gtm_variable: "{{JS - Search Term}}"
    data_type: string
    description: "검색에 사용한 키워드"
    example: "헤라 선크림"
    required: true

  # 검색 결과 개수
  - ga4_param: search_results
    dev_guide_var: AP_SEARCH_ITEMS_NUM
    gtm_variable: "{{JS - Search Result Count}}"
    data_type: number
    description: "검색 결과 상품 개수"
    example: 12
    required: true

  # 검색 성공 여부
  - ga4_param: search_success
    dev_guide_var: AP_SEARCH_RESULT
    gtm_variable: "{{JS - Search Result}}"
    data_type: string
    description: "검색 성공 여부 (상품 노출 여부)"
    example: "Y"
    required: true
    validation: "Y / N"

related_events:
  - event: view_item_list
    description: "검색 결과를 포함한 상품 리스트 조회 시 함께 발생"

verification_notes:
  - "view_item_list 이벤트와 함께 사용됨"
  - "검색 결과 페이지에서 두 이벤트가 모두 발생할 수 있음"
  - "GTM parser를 통해 실제 파라미터 매핑 확인 필요"
