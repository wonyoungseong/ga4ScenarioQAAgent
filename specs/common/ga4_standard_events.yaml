# GA4 표준 이벤트 정의
# 이 파일은 사이트에 관계없이 GA4 표준 이벤트의 스펙을 정의합니다.
# 사이트별 구현은 sites/{site_name}/ 폴더를 참조하세요.

version: "1.0"
last_updated: "2024-12-15"

# ============================================
# E-Commerce 이벤트 (GA4 표준)
# https://developers.google.com/analytics/devguides/collection/ga4/ecommerce
# ============================================
ecommerce_events:

  view_item:
    description: "사용자가 상품 상세 페이지를 조회할 때"
    trigger: "상품 상세 페이지 로드"
    required_params:
      - currency
      - value
      - items
    items_params:
      required:
        - item_id
        - item_name
      recommended:
        - item_brand
        - item_category
        - price
        - quantity

  select_item:
    description: "사용자가 상품 리스트에서 상품을 클릭할 때"
    trigger: "상품 리스트에서 상품 클릭"
    required_params:
      - items
    optional_params:
      - item_list_id
      - item_list_name
    items_params:
      required:
        - item_id
        - item_name
      recommended:
        - item_brand
        - item_category
        - index
        - price

  view_item_list:
    description: "사용자가 상품 리스트를 조회할 때"
    trigger: "상품 리스트/검색 결과 페이지 로드"
    required_params:
      - items
    optional_params:
      - item_list_id
      - item_list_name
    items_params:
      required:
        - item_id
        - item_name
      recommended:
        - item_brand
        - item_category
        - index
        - price

  add_to_cart:
    description: "사용자가 상품을 장바구니에 추가할 때"
    trigger: "장바구니 추가 버튼 클릭"
    required_params:
      - currency
      - value
      - items
    items_params:
      required:
        - item_id
        - item_name
        - quantity
      recommended:
        - item_brand
        - item_category
        - item_variant
        - price

  remove_from_cart:
    description: "사용자가 상품을 장바구니에서 삭제할 때"
    trigger: "장바구니 삭제 버튼 클릭"
    required_params:
      - currency
      - value
      - items
    items_params:
      required:
        - item_id
        - item_name
        - quantity
      recommended:
        - item_brand
        - item_category
        - item_variant
        - price

  view_cart:
    description: "사용자가 장바구니 페이지를 조회할 때"
    trigger: "장바구니 페이지 로드"
    required_params:
      - currency
      - value
      - items
    items_params:
      required:
        - item_id
        - item_name
        - quantity
      recommended:
        - item_brand
        - item_category
        - price

  begin_checkout:
    description: "사용자가 결제 프로세스를 시작할 때"
    trigger: "결제 시작 (장바구니 → 주문서 이동)"
    required_params:
      - currency
      - value
      - items
    optional_params:
      - coupon
    items_params:
      required:
        - item_id
        - item_name
        - quantity
      recommended:
        - item_brand
        - item_category
        - item_variant
        - price

  add_shipping_info:
    description: "사용자가 배송 정보를 입력할 때"
    trigger: "배송 정보 입력 완료"
    required_params:
      - currency
      - value
      - items
    optional_params:
      - coupon
      - shipping_tier

  add_payment_info:
    description: "사용자가 결제 정보를 입력할 때"
    trigger: "결제 정보 입력 완료"
    required_params:
      - currency
      - value
      - items
    optional_params:
      - coupon
      - payment_type

  purchase:
    description: "사용자가 구매를 완료할 때"
    trigger: "구매 완료 페이지 로드"
    required_params:
      - currency
      - value
      - transaction_id
      - items
    optional_params:
      - affiliation
      - coupon
      - shipping
      - tax
    items_params:
      required:
        - item_id
        - item_name
        - quantity
        - price
      recommended:
        - item_brand
        - item_category
        - item_variant
        - coupon

  refund:
    description: "환불이 발생할 때"
    trigger: "환불 처리 완료"
    required_params:
      - currency
      - value
      - transaction_id
    optional_params:
      - items

# ============================================
# 프로모션 이벤트 (GA4 표준)
# ============================================
promotion_events:

  view_promotion:
    description: "프로모션 배너가 화면에 노출될 때"
    trigger: "프로모션 요소가 뷰포트에 노출"
    required_params:
      - items
    items_params:
      recommended:
        - promotion_id
        - promotion_name
        - creative_name
        - creative_slot

  select_promotion:
    description: "사용자가 프로모션을 클릭할 때"
    trigger: "프로모션 배너/링크 클릭"
    required_params:
      - items
    items_params:
      recommended:
        - promotion_id
        - promotion_name
        - creative_name
        - creative_slot

# ============================================
# 사용자 이벤트 (GA4 표준/권장)
# ============================================
user_events:

  login:
    description: "사용자가 로그인할 때"
    trigger: "로그인 완료"
    optional_params:
      - method

  sign_up:
    description: "사용자가 회원가입할 때"
    trigger: "회원가입 완료"
    optional_params:
      - method

  search:
    description: "사용자가 검색을 수행할 때"
    trigger: "검색 실행"
    required_params:
      - search_term

# ============================================
# 콘텐츠 이벤트 (GA4 자동 수집 / 권장)
# ============================================
content_events:

  page_view:
    description: "페이지가 로드될 때"
    trigger: "페이지 로드 완료"
    auto_params:
      - page_location
      - page_referrer
      - page_title
    optional_params:
      - page_type
      - content_group

  scroll:
    description: "사용자가 페이지를 스크롤할 때"
    trigger: "페이지 90% 스크롤 도달 (기본)"
    auto_params:
      - percent_scrolled

  click:
    description: "사용자가 외부 링크를 클릭할 때"
    trigger: "외부 도메인 링크 클릭"
    auto_params:
      - link_url
      - link_domain
      - outbound

  view_search_results:
    description: "검색 결과 페이지를 조회할 때"
    trigger: "검색 결과 페이지 로드"
    required_params:
      - search_term
    optional_params:
      - search_result_count

# ============================================
# items 배열 표준 파라미터
# ============================================
items_standard_params:
  required:
    item_id:
      type: string
      description: "상품 고유 ID (SKU)"
      example: "SKU_12345"
    item_name:
      type: string
      description: "상품 이름"
      example: "설화수 윤조에센스"

  recommended:
    affiliation:
      type: string
      description: "제휴사/판매처"
    coupon:
      type: string
      description: "적용된 쿠폰"
    discount:
      type: number
      description: "할인 금액"
    index:
      type: number
      description: "리스트 내 위치 (0부터 시작)"
    item_brand:
      type: string
      description: "상품 브랜드"
    item_category:
      type: string
      description: "상품 카테고리 (1차)"
    item_category2:
      type: string
      description: "상품 카테고리 (2차)"
    item_category3:
      type: string
      description: "상품 카테고리 (3차)"
    item_category4:
      type: string
      description: "상품 카테고리 (4차)"
    item_category5:
      type: string
      description: "상품 카테고리 (5차)"
    item_list_id:
      type: string
      description: "상품 리스트 ID"
    item_list_name:
      type: string
      description: "상품 리스트 이름"
    item_variant:
      type: string
      description: "상품 옵션/변형"
    location_id:
      type: string
      description: "위치 ID"
    price:
      type: number
      description: "상품 가격 (단가)"
    quantity:
      type: number
      description: "수량"

  promotion:
    creative_name:
      type: string
      description: "프로모션 크리에이티브 이름"
    creative_slot:
      type: string
      description: "프로모션 슬롯 위치"
    promotion_id:
      type: string
      description: "프로모션 ID"
    promotion_name:
      type: string
      description: "프로모션 이름"

# ============================================
# 통화 코드 (ISO 4217)
# ============================================
currency_codes:
  - KRW  # 대한민국 원
  - USD  # 미국 달러
  - EUR  # 유로
  - JPY  # 일본 엔
  - CNY  # 중국 위안
  - GBP  # 영국 파운드

notes:
  - "이 파일은 GA4 표준 이벤트의 스펙만 정의합니다"
  - "사이트별 구현 세부사항은 sites/{site_name}/ 폴더 참조"
  - "GA4 공식 문서: https://developers.google.com/analytics/devguides/collection/ga4/reference/events"
